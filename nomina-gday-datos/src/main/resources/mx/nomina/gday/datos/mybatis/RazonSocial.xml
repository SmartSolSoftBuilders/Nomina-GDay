<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mx.nomina.gday.dao.RazonSocialDao">
	<resultMap type="RazonSocial" id="razonSocialResult">
		<id property="idRazonSocial" column="ID_RAZON_SOCIAL"/>
		<result property="nombreRazonSocial" column="NOMBRE_RAZON_SOCIAL"/>
		<result property="rfc" column="RFC"/>
		<result property="nombreCortoRazonS" column="NOMBRE_CORTO_RAZON_S"/>
		<result property="codCliente" column="COD_CLIENTE"/>
		<result property="comision" column="COMISION"/>
		<result property="actConstitutiva" column="ACT_CONSTITUTIVA"/>
		<result property="fechaActConstitutiva" column="FECHA_ACT_CONSTITUTIVA"/>
		<result property="fechaInicioOperacion" column="FECHA_INICIO_OPERACION"/>
		<result property="paternoRepresentante" column="PATERNO_REPRESENTANTE"/>
		<result property="maternoRepresentante" column="MATERNO_REPRESENTANTE"/>
		<result property="nombresRepresentante" column="NOMBRES_REPRESENTANTE"/>
		<result property="calleFiscal" column="CALLE_FISCAL"/>
		<result property="coloniaFiscal" column="COLONIA_FISCAL"/>
		<result property="numExteriorFiscal" column="NUM_EXTERIOR_FISCAL"/>
		<result property="numInteriorFiscal" column="NUM_INTERIOR_FISCAL"/>
		<result property="cpFiscal" column="CP_FISCAL"/>
		<result property="municipioFiscal" column="MUNICIPIO_FISCAL"/>
		<result property="estadoFiscal" column="ESTADO_FISCAL"/>
		<result property="contactoUnoNombre" column="CONTACTO1_NOMBRE"/>
		<result property="contactoUnoTelefono" column="CONTACTO1_TELEFONO"/>
		<result property="contactoUnoCorreo" column="CONTACTO1_CORREO"/>
		<result property="contactoDosNombre" column="CONTACTO2_NOMBRE"/>
		<result property="contactoDosTelefono" column="CONTACTO2_TELEFONO"/>
		<result property="contactoDosCorreo" column="CONTACTO2_CORREO"/>
		<result property="contactoTresNombre" column="CONTACTO3_NOMBRE"/>
		<result property="contactoTresTelefono" column="CONTACTO3_TELEFONO"/>
		<result property="contactoTresCorreo" column="CONTACTO3_CORREO"/>
		<result property="objetoSocial" column="OBJETO_SOCIAL"/>
		<association property="grupo" column="ID_GRUPO" javaType="Grupo" select="selectGrupo"/>		
	</resultMap>
	
	<resultMap id="grupoResult" type="Grupo">
		<id property="idGrupo" column="ID_GRUPO"/>
		<result property="nombreCorto" column="NOMBRE_CORTO_GRUPO"/>
		<result property="nombre" column="NOMBRE_GRUPO"/>
	</resultMap>
	
	<select id="selectGrupo" parameterType="int" resultMap="grupoResult" resultType="Grupo">		 
		select * from "GRUPO" where "ID_GRUPO"=#{idGrupo} 	
	</select> 
	
	<select id="obtenerRazonesSociales" resultMap="razonSocialResult" resultType="RazonSocial">
		select * from "RAZON_SOCIAL"
	</select>
	
	<insert id="agregarRazonSocial" parameterType="RazonSocial" keyProperty="id">
		<selectKey keyProperty="id" resultType="long" order="BEFORE">
  		   	SELECT nextVal('sec_razonsocial')
  		</selectKey>	
	INSERT INTO "RAZON_SOCIAL"(
            "ID_RAZON_SOCIAL", "ID_GRUPO", "NOMBRE_RAZON_SOCIAL", "RFC", 
            "NOMBRE_CORTO_RAZON_S", "COD_CLIENTE", "COMISION", "ACT_CONSTITUTIVA", 
            "FECHA_ACT_CONSTITUTIVA", "FECHA_INICIO_OPERACION", "PATERNO_REPRESENTANTE", 
            "MATERNO_REPRESENTANTE", "NOMBRES_REPRESENTANTE", "CALLE_FISCAL", 
            "COLONIA_FISCAL", "NUM_EXTERIOR_FISCAL", "NUM_INTERIOR_FISCAL", 
            "CP_FISCAL", "MUNICIPIO_FISCAL", "ESTADO_FISCAL", "CONTACTO1_NOMBRE", 
            "CONTACTO1_TELEFONO", "CONTACTO1_CORREO", "CONTACTO2_NOMBRE", 
            "CONTACTO2_TELEFONO", "CONTACTO2_CORREO", "CONTACTO3_NOMBRE", 
            "CONTACTO3_TELEFONO", "CONTACTO3_CORREO", "OBJETO_SOCIAL")
	VALUES(#{id}, #{grupo.idGrupo}, #{nombreRazonSocial}, #{rfc}, #{nombreCortoRazonS}, #{codCliente}, #{comision},
		   #{actConstitutiva}, date(#{fechaActConstitutiva}),date(#{fechaInicioOperacion}), #{paternoRepresentante}, 
		   #{maternoRepresentante}, #{nombresRepresentante}, #{calleFiscal}, #{coloniaFiscal},
		   #{numExteriorFiscal}, #{numInteriorFiscal}, #{cpFiscal}, #{municipioFiscal}, #{estadoFiscal},
		   #{contactoUnoNombre}, #{contactoUnoTelefono}, #{contactoUnoCorreo}, #{contactoDosNombre}, #{contactoDosTelefono},
		   #{contactoDosCorreo}, #{contactoTresNombre}, #{contactoTresTelefono}, #{contactoTresCorreo}, #{objetoSocial});
</insert>
	
</mapper>