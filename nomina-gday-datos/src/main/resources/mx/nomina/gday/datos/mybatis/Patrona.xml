<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mx.nomina.gday.dao.PatronaDao">
	<resultMap type="Patrona" id="patronaResult">
		<id property="idPatrona" column="ID_PATRONA"/>
		<result property="razonSocialPatrona" column="RAZON_SOCIAL"/>
		<result property="rfcPatrona" column="RFC"/>
		<result property="nombreCortoPatrona" column="NOMBRE_CORTO"/>
		<result property="esIntermediariaPatrona" column="ES_INTERMEDIARIA"/>
		<result property="folioMercantilPatrona" column="FOLIO_MERCANTIL"/>
		<result property="calleFiscalPatrona" column="CALLE_FISCAL"/>
		<result property="coloniaFiscalPatrona" column="COLONIA_FISCAL"/>
		<result property="numExteriorFiscalPatrona" column="NUM_EXTERIOR_FISCAL"/>
		<result property="numInteriorFiscalPatrona" column="NUM_INTERIOR_FISCAL"/>
		<result property="cpFiscalPatrona" column="CP_FISCAL"/>
		<result property="municipioFiscalPatrona" column="MUNICIPIO_FISCAL"/>
		<result property="estadoFiscalPatrona" column="ESTADO_FISCAL"/>
		<result property="fiscalNumPagoPatrona" column="FISCAL_NUM_PAGO"/>
		<result property="telContactoPatrona" column="TEL_CONTACTO"/>
		<result property="actaNumeroPatrona" column="ACTA_NUMERO"/>
		<result property="actaNotariaPatrona" column="ACTA_NOTARIA"/>
		<result property="actaFechaPatrona" column="ACTA_FECHA"/>
		<result property="actaNotarioPatrona" column="ACTA_NOTARIO"/>
		<result property="actaCiudadPatrona" column="ACTA_CIUDAD"/>
		<result property="actaEstadoPatrona" column="ACTA_ESTADO"/>
		
<!-- 		<association property="tipoRegimen" column="ID_TIPO_REGIMEN" javaType="TipoRegimen" select="selectTipoRegimen"/>		
 -->	
 	</resultMap>
	
	<!-- ResultMap de TipoRegimen que selecciona el tipoRegimen por idTipoRegimen -->
	<resultMap id="tipoRegimenResult" type="TipoRegimen">
    	<id property="idTipoRegimen" column="ID_TIPO_REGIMEN"/>
		<result property="tipoRegimen" column="TIPO_REGIMEN"/>
	</resultMap>
	
<!-- 	<select id="selectTipoRegimen" parameterType="int" resultMap="tipoRegimenResult" resultType="TipoRegimen">		 
		select * from "TIPO_REGIMEN" where "ID_TIPO_REGIMEN"=#{idTipoRegimen} 	
	</select> -->
	
	<!-- 	Select que obtiene una lista de patronas Registradas-->	
	<select id="obtenerPatronas"  resultMap="patronaResult" resultType="Patrona">		 
		select * from "PATRONA"  	
	</select> 

	<!-- Select para obtener la Patrona por idPatrona -->
	<select id="obtenerPatronaById" parameterType="int" resultMap="patronaResult" resultType="Patrona">		 
		select * from "PATRONA" where "ID_PATRONA"=#{idPatrona} 	
	</select>


<!-- Insert para guardar Patrona-->
	<insert id="agregarPatrona" parameterType="Patrona" keyProperty="id">
		<selectKey keyProperty="id" resultType="long" order="BEFORE">
  		   	SELECT nextVal('sec_patrona')
  		</selectKey>
  		
  		INSERT INTO "PATRONA"(
            "ID_PATRONA", "RAZON_SOCIAL", "RFC", "NOMBRE_CORTO", "ES_INTERMEDIARIA", "TIPO_REGIMEN", 
            "FOLIO_MERCANTIL", "CALLE_FISCAL", "COLONIA_FISCAL", 
            "NUM_EXTERIOR_FISCAL", "NUM_INTERIOR_FISCAL", "CP_FISCAL", "MUNICIPIO_FISCAL", 
            "ESTADO_FISCAL", "FISCAL_NUM_PAGO", "TEL_CONTACTO", "ACTA_NUMERO", 
            "ACTA_NOTARIA", "ACTA_FECHA", "ACTA_NOTARIO", 
            "ACTA_CIUDAD", "ACTA_ESTADO")
   	 	VALUES (#{id}, #{razonSocialPatrona}, #{rfcPatrona}, #{nombreCortoPatrona}, #{esIntermediariaPatrona}, 
   	 		#{tipoRegimen.tipoRegimen}, #{folioMercantilPatrona}, #{calleFiscalPatrona},  #{coloniaFiscalPatrona},  #{numExteriorFiscalPatrona}, 
            #{numInteriorFiscalPatrona}, #{cpFiscalPatrona}, #{municipioFiscalPatrona}, #{estadoFiscalPatrona}, 
            #{fiscalNumPagoPatrona}, #{telContactoPatrona}, #{actaNumeroPatrona}, 
            #{actaNotariaPatrona},date(#{actaFechaPatrona}), #{actaNotarioPatrona}, 
            #{actaCiudadPatrona}, #{actaEstadoPatrona});
             	
	</insert>
	
<!-- Update para actualizar la Patrona seleccionada --> 
<update id="actualizarPatrona" parameterType="Patrona">
	UPDATE "PATRONA"
   	SET 	"RAZON_SOCIAL"=#{razonSocialPatrona}, "RFC"=#{rfcPatrona}, "NOMBRE_CORTO"=#{nombreCortoPatrona}, "ES_INTERMEDIARIA"=#{esIntermediariaPatrona}, "FOLIO_MERCANTIL"=#{folioMercantilPatrona}, 
            "CALLE_FISCAL"=#{calleFiscalPatrona}, "COLONIA_FISCAL"=#{coloniaFiscalPatrona}, "NUM_EXTERIOR_FISCAL"=#{numExteriorFiscalPatrona}, 
            "NUM_INTERIOR_FISCAL"=#{numInteriorFiscalPatrona}, "CP_FISCAL"=#{cpFiscalPatrona}, "MUNICIPIO_FISCAL"=#{municipioFiscalPatrona}, 
            "ESTADO_FISCAL"=#{estadoFiscalPatrona}, "FISCAL_NUM_PAGO"=#{fiscalNumPagoPatrona}, "TEL_CONTACTO"=#{telContactoPatrona}, "ACTA_NUMERO"=#{actaNumeroPatrona}, 
            "ACTA_NOTARIA"=#{actaNotariaPatrona}, "ACTA_FECHA"= date(#{actaFechaPatrona}), "ACTA_NOTARIO"=#{actaNotarioPatrona}, "ACTA_CIUDAD"=#{actaCiudadPatrona}, "ACTA_ESTADO"=#{actaNotariaPatrona} 
 	WHERE "ID_PATRONA"=#{idPatrona}  
</update>

</mapper>